# AWS サービスアイコン認識ゲーム

## 概要
このゲームは、AWS のサービスアイコンを認識する能力を競うクイズゲームです。プレイヤーは制限時間内に、徐々に解像度が上がっていくAWSサービスアイコンを見て、4つの選択肢から正しいサービス名を選ぶ必要があります。

## 前提条件

- Python 3.8以上
- インターネット接続（初回セットアップ時のみ必要）

## インストール方法

### 1. リポジトリのクローン

```bash
git clone https://github.com/yourusername/aws-icon-recognition-game.git
cd aws-icon-recognition-game
```

### 2. 仮想環境のセットアップ

#### Windows
```bash
python -m venv pygame-env
pygame-env\Scripts\activate
pip install -r requirements.txt
```

#### macOS / Linux
```bash
python3 -m venv pygame-env
source pygame-env/bin/activate
pip install -r requirements.txt
```

### 3. ゲームのセットアップ

```bash
python setup.py
```

このコマンドは以下の処理を行います：
- 必要なディレクトリ構造の作成
- 日本語フォント（IPAゴシック）のダウンロード
- AWS公式アイコンのダウンロード（オプション）

## 実行方法

仮想環境を有効化した状態で以下のコマンドを実行します：

```bash
python main.py
```

## ゲーム仕様

### 基本ルール
- 画面にAWSサービスのアイコンが表示されます
- アイコンは最初は低解像度（256x256ピクセル）から始まり、徐々に高解像度（最大2048x2048）になります
- プレイヤーは4つの選択肢からアイコンが表示しているAWSサービスを選びます
- 制限時間内に正解すると得点が加算されます
- 制限時間が少ないほど高得点になります
- 連続正解でコンボボーナスが加算されます

### 表示の仕様
- アイコンの解像度は 256 → 400 → 576 → 784 → 1024 → 1536 → 2048 と段階的に上がります
- 時間経過とともに解像度が上がり、アイコンが識別しやすくなります
- 残り時間が3秒を切ると、元のアイコンがそのまま表示されます
- 4つの選択肢はランダムに表示され、その中に正解が含まれています

### スコアリング
- 基本点: 100点
- 時間ボーナス: 残り時間 × 10点
- コンボボーナス: 連続正解数 × 5点
- 不正解またはタイムアップでコンボがリセット

## 操作方法
- マウスクリックで選択肢を選ぶ
- ESCキーでメニューに戻る
- メニュー画面でEnterキーを押すとゲーム開始

## 技術仕様
- 開発言語: Python 3
- ゲームエンジン: PyGame
- フォント: IPAゴシック（自動ダウンロード）
- AWS公式アイコン使用（自動ダウンロードまたは手動配置）

## ファイル構成
- `main.py`: ゲームのエントリーポイント
- `game.py`: ゲームのメインロジック
- `utils.py`: ユーティリティ関数（アイコン読み込み、ピクセル化など）
- `setup.py`: 初期セットアップスクリプト
- `requirements.txt`: 依存パッケージリスト
- `assets/`: アセットディレクトリ
  - `fonts/`: フォントファイル
  - `icons/`: AWSサービスアイコン

## トラブルシューティング

### 日本語が文字化けする場合
- `setup.py` を実行して、IPAゴシックフォントが正しくダウンロードされているか確認してください
- `assets/fonts/ipag.ttf` が存在することを確認してください

### アイコンが表示されない場合
- `setup.py` を実行して、AWS公式アイコンをダウンロードするオプションを選択してください
- または、AWS公式サイトから Architecture Icons をダウンロードし、`assets/icons/` ディレクトリに配置してください
  - 特に `_64@5x.png` で終わるファイルが必要です

### ゲームが起動しない場合
- 仮想環境が有効化されているか確認してください
- 必要なパッケージがインストールされているか確認してください：
  ```bash
  pip install -r requirements.txt
  ```

## 注意事項

本リポジトリは「[Amazon Q CLI でゲームを作ろう Tシャツキャンペーン](https://aws.amazon.com/jp/blogs/news/build-games-with-amazon-q-cli-and-score-a-t-shirt/) 」に向けて作成したゲームのプログラム一式を格納しているものとなります。

それらのプログラムは以下のプロンプトを投入することによって生成された結果となり、ローカルの環境での動作は確認していますが、すべての環境で正しく動作をすることを保証するものではありませんので予めご了承ください。

また、fork いただいて改変いただくなどはご自由に実施ください。

### プロンプト原文

AWS のサービスアイコンを利用した回答速度を競うゲームの作成をしたいです。そのゲームでは指定の秒数をカウントダウンしていき、タイムが 0 になるまでの間に画像として表示されている AWS のサービスアイコンがどの AWS サービスのアイコンであるかを4つの選択肢から選択してクイズに答える形にしたいです。画面に表示されている AWS サービスアイコンは 1x1 から始まり 4x4、9x9 のように徐々に解像度が上がっていくようなドット絵で表現されていることが望ましく、最大 1,024x1,024 のドットとなる形で解像度が上がり、表示されているアイコンがより具体的になることでタイムアップに近づくにつれて難易度が下がる形にしたいです。ゲームエンジンは PyGame を利用することとし、カレントディレクトリの pygame-env に仮想環境として構築済みです。 / なお、このプロンプトを含めて readmd.md の形で仕様の出力もしたいです。

### プロンプト原文（修正1回目）

README.md にあるプロンプト原文をもとにカレントディレクトリに pygame-env の仮想環境で動作する PyGame を用いた AWS サービスアイコンで表された AWS サービスを回答するクイズゲームを作成しました。ただ、動作させてみるといくつかの問題があったので修正をしたいと思います。問題点1.日本語で表示されていると思われる部分が文字化けしている。問題点2.初期動作の 1x1 表示では何も判別できず難易度が高すぎました。初期値を 256x256 のドットとしてスタートさせるように変更できますか。

### プロンプト原文（修正2回目）

README.md にある「プロンプト原文」および「プロンプト原文（修正1回目）にあるようにゲームの作成と問題点の修正を試しました。python setup.py を実行し直し、再度ゲームを試してみたのですが、日本語部分の文字化けが治っていない状態でした。また、assets/ ディレクトリにサービスアイコンがない場合にはダミーのアイコンを生成するようになっているようですが、https://d1.awsstatic.com/webteam/architecture-icons/q1-2025/Asset-Package_02072025.dee42cd0a6eaacc3da1ad9519579357fb546f803.zip から入手解答したものを利用して、正確な AWS アイコンを用いたクイズゲームとしたいです。

### プロンプト原文（修正3回目）

README.mdにある プロンプト原文* をもとにゲームの作成と修正をしています。やはり日本語の文字化けが治っていません。また、クイズの選択肢が AWS サービス名ではなく、アイコンファイルのファイル名をベースとしてしまっている箇所を直したいです。例えば Arch_Elastic-Load-Balancing_64@5x.png というファイルがある場合に、冒頭の Arch_と末尾の_64@5x.png のそれぞれを切り取って残った Elastic-Load-Balancing をベースに利用します。さらに -（ハイフン）を半角スペースに置き換えて Elastic Load Balancing という選択肢として利用できると良いかと思います。また、アイコンファイルをダウンロードしてそのまま展開した場合に同一のサービスに対して複数のアイコンサイズや画像形式のファイルが複数含まれるため「_64@5x.png」を含むアイコンのみを出題対象としてください。また、タイムアップした際にも次の問題へ遷移できるようにしたい修正も加えてください。さらにドット化したアイコンが1,024x1,024でも判別しにくいので、2,048X2,048を最大として最後はアイコンファイル現物を表示するようにしたいです

### プロンプト原文（修正4回目）

README.md をもとに作成中のゲームの修正をしています。ゲーム性は問題なくなりましたが。日本語部分の文字化けが直っていません。「警告: 日本語フォントが見つかりませんでした。デフォルトフォントを使用します。」のエラーが表示されますが、実際には文字化けを起こしています。

### プロンプト原文（修正5回目）

マルチプラットフォームで動作できるようの assets/fonts/ に Noto Sans JP をインストールしてそのフォントファイルを利用する形の方が望ましいです。

### プロンプト原文（修正6回目）

動作も問題ないことを確認しました。配布して異なる環境でもゲームを導入できるようにしたいです。依存性のあるファイルやミドルウェア、パッケージの導入手順が setup.py に含まれているかを確認してください。そして、README.md の内容に前提条件と、導入方法を追記してください。